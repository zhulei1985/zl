CAccount pMyAccount = nullptr;
void PrintGuide()
{
	print("¼òÒ×ÁÄÌìÊÒÖ¸Áî:");
	print("×¢²áÕËºÅ: RegisterAccount [ÕËºÅ] [ÃÜÂë]");
	print("µÇÂ¼ÕËºÅ: LoginAccount [ÕËºÅ] [ÃÜÂë]");
	print("·¢ËÍÏûÏ¢(ÐèÒªµÇÂ¼): Talk [ÄÚÈÝ]");
	print("ÐÞ¸ÄêÇ³Æ: SetNick [Ãû³Æ]");
}

void Error_CannotRunScript()
{
	print("Ö¸Áî´íÎó»òÊÇÃ»ÓÐÈ¨ÏÞ");
}

void RegisterFail()
{
	print("×¢²áÊ§°Ü");
}

void LoginFail()
{
	print("µÇÂ¼Ê§°Ü");
}

void RegisterSuccess(CAccount pAccount)
{
	pMyAccount = pAccount;
	print("×¢²á³É¹¦");
}

void LoginSuccess(CAccount pAccount)
{
	pMyAccount = pAccount;
	print("µÇÂ¼³É¹¦");
}
void SendMessage(CAccount pAccount, string strContent, Connector pClient )
{
	print(pAccount->GetNickName()+":"+strContent);
}
void RegisterAccount(string strAccount, string password, Connector pClient)
{
	pClient->RunScript(0,"RegisterAccount",strAccount,password);
}
void LoginAccount(string strAccount, string password, Connector pClient)
{
	pClient->RunScript(0,"LoginAccount",strAccount,password);
}
void Talk(string strContent, Connector pClient)
{
	pClient->RunScript(0,"Talk",strContent);
}
void SetNick(string name, Connector pClient)
{
	print("³¢ÊÔÉèÖÃêÇ³Æ");
	//CAccount pAccount = GetVal4Data("Account","a");
	pMyAccount->SetNickName(name);
	print("ÉèÖÃêÇ³ÆÎª"+pMyAccount->GetNickName());
}
void main()
{
	print("Æô¶¯");
	Connector pClient = NewConnector("127.0.0.1",9999, "inner","123456");
	pClient->SetScriptLimit("Error_CannotRunScript",1);
	pClient->SetScriptLimit("RegisterFail",1);
	pClient->SetScriptLimit("LoginFail",1);
	pClient->SetScriptLimit("RegisterSuccess",1);
	pClient->SetScriptLimit("LoginSuccess",1);
	pClient->SetScriptLimit("SendMessage",1);
	print("³õÊ¼»¯Á¬½Ó");
	while (pClient->IsConnect()==0)
	{
		wait(1);
	}

	print("connect...ok");

	PrintGuide();

	while (1)
	{
		string str = UserInput();
		if (str == "")
		{
			PrintGuide();
		}
		else
		{
			RunScript(0,ExecuteCommand(str,pClient));
			//pClient->RunScript(0,ExecuteCommand(str));
		}

		//print(str);
		wait(1);
	}
}